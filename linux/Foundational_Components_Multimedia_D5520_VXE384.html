

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.7. Multimedia Video Codec &mdash; Processor SDK Linux for J721e Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Processor SDK Linux for J721e Documentation" href="../index.html"/>
        <link rel="up" title="3. Foundational Components" href="Foundational_Components.html"/>
        <link rel="next" title="3.8. Virtualization" href="Foundational_Components_Virtualization.html"/>
        <link rel="prev" title="3.6.8. Rogue Power Management Info" href="Foundational_Components/Graphics/Rogue_Power_Management_Info.html"/> 
  <script src="https://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../devices/J7_Family/linux/index.html" class="icon icon-home"> Processor SDK Linux for J721e
          

          
          </a>

          
            
            
              <div class="version">
                09_00_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/J7_Family/linux/Release_Specific.html">2. Release Specific</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Foundational_Components.html">3. Foundational Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_U-Boot.html">3.1. U-Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_Kernel.html">3.2. Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_Filesystem.html">3.3. Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_Tools.html">3.4. Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_IPC_J721E.html">3.5. IPC for J721E</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_Graphics.html">3.6. Graphics and Display</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.7. Multimedia Video Codec</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">3.7.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encoder-and-decoder-capabilities">3.7.2. Encoder and Decoder Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#demos">3.7.3. Demos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-architecture">3.7.4. Software Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#software-stack-of-accelerated-codec-encoding-decoding">3.7.4.1. Software Stack of Accelerated Codec Encoding/Decoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux-kernel-drivers">3.7.4.2. Linux Kernel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gstreamer-plugins-for-multimedia">3.7.4.3. GStreamer Plugins for Multimedia</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#gstreamer-pipelines">3.7.5. GStreamer Pipelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-a-gstreamer-pipeline">3.7.5.1. Running a GStreamer pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations-of-gstreamer-plugins">3.7.5.2. Limitations of GStreamer Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gstreamer-plugin-internals">3.7.5.3. GStreamer Plugin Internals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memory-optimisation">3.7.6. Memory Optimisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decoder-driver-memory-optimisation">3.7.6.1. Decoder Driver Memory Optimisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rebuilding-and-debugging">3.7.7. Rebuilding and Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rebuilding-v4l2-drivers">3.7.7.1. Rebuilding V4L2 Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debug-logs">3.7.7.2. Debug Logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#latency-profiling">3.7.7.3. Latency Profiling</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_Virtualization.html">3.8. Virtualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_ATF.html">3.9. ARM Trusted Firmware-A</a></li>
<li class="toctree-l2"><a class="reference internal" href="Foundational_Components_OPTEE.html">3.10. OP-TEE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="How_to_Guides.html">4. How to Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation_Tarball.html">5. Documentation Tarball</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../devices/J7_Family/linux/index.html">Processor SDK Linux for J721e</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../devices/J7_Family/linux/index.html">Docs</a> &raquo;</li>
      
          <li><a href="Foundational_Components.html"><span class="section-number">3. </span>Foundational Components</a> &raquo;</li>
      
    <li><span class="section-number">3.7. </span>Multimedia Video Codec</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="multimedia-video-codec">
<span id="foundational-components-multimedia"></span><h1><span class="section-number">3.7. </span>Multimedia Video Codec<a class="headerlink" href="#multimedia-video-codec" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2><span class="section-number">3.7.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>TI’s embedded processors such as J721E have the
following hardware accelerators:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Multi-Standard HD Video Decoder (DECODER) based on D5520MP2 from
Imagination Technologies for accelerating multimedia decode</p></li>
<li><p>Multi-Standard HD Video Encoder (ENCODER) based on VXE384MP2 from
Imagination Technologies for accelerating multimedia encode</p></li>
</ol>
</div></blockquote>
<p>In order to make it easy for customers to write applications, and to
leverage open source elements that provide functionality such as AVI
stream demuxing, audio encode/decode, etc, TI’s Processor SDK Linux J721e
provides ARM-based GStreamer plugins that abstract the hardware
acceleration.</p>
<p>This multimedia training page will cover the following topics:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Capabilities of DECODER and ENCODER</p></li>
<li><p>Out-of-box Multimedia Demos in Processor SDK Linux J721e</p></li>
<li><p>Software Stack of Accelerated Codec Encoding/Decoding</p></li>
<li><p>GStreamer Pipelines for Multimedia Applications</p></li>
<li><p>Limitations of GStreamer Plugins</p></li>
<li><p>Memory Optimisation</p></li>
<li><p>Rebuilding the V4L2 encode/decode driver modules</p></li>
<li><p>Enabling Debug Features</p></li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="capabilities-of-decoder-encoder-and-arm">Capabilities of DECODER, ENCODER, and ARM</p>
<p>In Processor SDK Linux J721e, DECODER supports the following codecs:</p>
<blockquote>
<div><ul class="simple">
<li><p>Video Decode: H.264 and HEVC/H.265</p></li>
<li><p>Image Decode: MJPEG</p></li>
</ul>
</div></blockquote>
<p>In Processor SDK Linux J721e, ENCODER supports the following codecs:</p>
<blockquote>
<div><ul class="simple">
<li><p>Video Encode: H.264</p></li>
</ul>
</div></blockquote>
<p>Demo applications also demonstrate the following ARM-based coding
capabilities:</p>
<blockquote>
<div><ul class="simple">
<li><p>Audio encoding and decoding on ARM: AAC, MPEG2 (leveraging open
source codecs)</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="encoder-and-decoder-capabilities">
<h2><span class="section-number">3.7.2. </span>Encoder and Decoder Capabilities<a class="headerlink" href="#encoder-and-decoder-capabilities" title="Permalink to this headline">¶</a></h2>
<p>Max capabilites of the drivers seen in Processor SDK Linux J721e are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>ENCODER: 2 x 1080p30 streams running in parallel</p></li>
<li><p>DECODER : 8 x 1080p30 streams running in parallel</p></li>
</ul>
</div></blockquote>
<p>ENCODER does not support resolutions greater than 1080p due to hardware limitations.
No more than 2 channels can be processed in parallel. Higher framerates are supported
for 1080p when only 1 channel is in use as it will split the load across both the hardware
pipes. Max framerate for a single 1080p channel is 60fps.</p>
<p>4k decoding is supported by the DECODER. However, 8 channels, which represent maximum
number of pipes on the device, do not have the capability of doing 4k simultaneously.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="demos">
<h2><span class="section-number">3.7.3. </span>Demos<a class="headerlink" href="#demos" title="Permalink to this headline">¶</a></h2>
<p>The multimedia video decode capabilities can be demonstrated by using
the GStreamer pipeline to decode to the display. Please refer to the section
<a class="reference internal" href="#gstreamer-pipelines">GStreamer Pipelines</a>  for further details.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="software-architecture">
<h2><span class="section-number">3.7.4. </span>Software Architecture<a class="headerlink" href="#software-architecture" title="Permalink to this headline">¶</a></h2>
<div class="section" id="software-stack-of-accelerated-codec-encoding-decoding">
<h3><span class="section-number">3.7.4.1. </span>Software Stack of Accelerated Codec Encoding/Decoding<a class="headerlink" href="#software-stack-of-accelerated-codec-encoding-decoding" title="Permalink to this headline">¶</a></h3>
<p>As shown in the figures below, the software stack of the accelerated
encoding and decoding has two parts:</p>
<blockquote>
<div><ul class="simple">
<li><p>A V4L2 (Video4Linux version 2) software driver running as part of Linux</p></li>
</ul>
<p>on the A72 MPU subsystem
-  The firmware running on the DECODER and ENCODER</p>
</div></blockquote>
<p>The driver communicates with the firmware running on the ENCODER/DECODER
through its own IPC (inter-processor communication).
At the highest level in the MPU subsystem on the A72, Processor SDK Linux J721e
comes packaged with Gstreamer. GStreamer is an open source framework that
simplifies the development of multimedia applications. This application is
responsible for abstracting away details specific to the hardware acceleators.
The accelerators are reference in Gstreamer by the V4L2 plugin. This plugin is
responsible for the interaction between user space and the V4L2 kernel driver.</p>
<div class="center"><div class="floatnone"><div class="figure align-default" id="id1">
<img alt="codec software stack" src="../_images/MM_D5520MP2_VXE384MP2_SW_overview.png" />
<p class="caption"><span class="caption-number">Fig. 3.5 </span><span class="caption-text">CODEC Software Stack</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="linux-kernel-drivers">
<h3><span class="section-number">3.7.4.2. </span>Linux Kernel Drivers<a class="headerlink" href="#linux-kernel-drivers" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="ti-provided-v4l2-drivers-for-multimedia">TI-Provided V4L2 Drivers for Multimedia</p>
<p>Video4Linux version 2 (V4L2) is an open source framework that
provides a media interface to all Linux-based applications. V4L2 is
a collection of device drivers and an API for supporting realtime
video capture and video memory-to-memory operations on Linux systems.</p>
<p>Video encode and decode using the ENCODER and DECODER hardware, respectively,
are enabled as V4L2 drivers. The V4L2 is integrated with the ENCODER and
DECODER drivers by a thin layer that implements the required V4L2 ioctls.
Furthermore, this layer is also responsible for translating the incoming
V4L2 data structures to those understood by the ENCODER/DECODER.</p>
<div class="section" id="v4l2-video-decoder">
<h4><span class="section-number">3.7.4.2.1. </span>V4L2 Video Decoder<a class="headerlink" href="#v4l2-video-decoder" title="Permalink to this headline">¶</a></h4>
<p>The V4L2 video decoder driver is a memory-to-memory device that receives
the encoded data on its “output” stream and generates the decoded data to
its “capture” stream. The module name is “vxd-dec.ko”.</p>
<p class="rubric" id="v4l2-dec-codec-support">Codec Support</p>
<p>The V4L2 decoder driver supports receiving the following encoded bitstream
formats on its “output” stream:</p>
<blockquote>
<div><ul class="simple">
<li><p>V4L2_PIX_FMT_H264</p></li>
<li><p>V4L2_PIX_FMT_HEVC</p></li>
<li><p>V4L2_PIX_FMT_MJPEG</p></li>
</ul>
</div></blockquote>
<p class="rubric" id="v4l2-dec-color-format-support">Color Format Support</p>
<p>The DECODER supports outputting several color formats. There is no color
conversion performed. The selected color format should be the same as the
native color format of the encoded stream. The V4L2 decoder driver supports
several standard V4L2 color formats, plus two custom color formats. The
formats supported are:</p>
<p>Standard Formats:</p>
<blockquote>
<div><ul class="simple">
<li><p>V4L2_PIX_FMT_NV12</p></li>
<li><p>V4L2_PIX_FMT_NV16</p></li>
<li><p>V4L2_PIX_FMT_YUV420M</p></li>
<li><p>V4L2_PIX_FMT_YUV422M</p></li>
</ul>
</div></blockquote>
<p>Custom Formats:</p>
<blockquote>
<div><ul class="simple">
<li><p>V4L2_PIX_FMT_TI1210 (NV12 10-bit)</p></li>
<li><p>V4L2_PIX_FMT_TI1610 (NV16 10-bit)</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Formats with an “M” at the end of their name are multi-planar formats,
meaning that the planes are non-contiguous in memory.</p>
</div>
<p>The following table shows the native color format support for each of the supported codecs:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Codec</strong></p></td>
<td><p><strong>Supported Color Format</strong></p></td>
</tr>
<tr class="row-even"><td><p>H.264</p></td>
<td><p>V4L2_PIX_FMT_NV12</p>
<p>V4L2_PIX_FMT_NV16</p>
<p>V4L2_PIX_FMT_TI1210</p>
<p>V4L2_PIX_FMT_TI1610</p>
</td>
</tr>
<tr class="row-odd"><td><p>HEVC/H.265</p></td>
<td><p>V4L2_PIX_FMT_NV12</p>
<p>V4L2_PIX_FMT_NV16</p>
<p>V4L2_PIX_FMT_TI1210</p>
<p>V4L2_PIX_FMT_TI1610</p>
</td>
</tr>
<tr class="row-even"><td><p>MJPEG</p></td>
<td><p>V4L2_PIX_FMT_YUV420M</p>
<p>V4L2_PIX_FMT_YUV422M</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v4l2-video-encoder">
<h4><span class="section-number">3.7.4.2.2. </span>V4L2 Video Encoder<a class="headerlink" href="#v4l2-video-encoder" title="Permalink to this headline">¶</a></h4>
<p>The V4L2 video encoder driver is a memory-to-memory device that receives
the raw frame data on its “output” stream and generates the encoded data to
its “capture” stream. The module name is “vxe-enc.ko”.</p>
<p class="rubric" id="v4l2-enc-codec-support">Codec Support</p>
<p>The V4L2 encoder driver supports encoding to the following encoded bitstream
formats on its “capture” stream:</p>
<blockquote>
<div><ul class="simple">
<li><p>V4L2_PIX_FMT_H264</p></li>
</ul>
</div></blockquote>
<p class="rubric" id="v4l2-enc-color-format-support">Color Format Support</p>
<p>The V4L2 encoder driver supports encoding of the following color formats for
the raw data “output” stream:</p>
<blockquote>
<div><ul class="simple">
<li><p>V4L2_PIX_FMT_NV12</p></li>
</ul>
</div></blockquote>
<p class="rubric" id="v4l2-enc-config-controls">Configurable Controls</p>
<p>The V4L2 encoder driver has the following configurable controls:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 11%" />
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Ctrl</strong></p></td>
<td><p><strong>Min</strong></p></td>
<td><p><strong>Max</strong></p></td>
<td><p><strong>Step</strong></p></td>
<td><p><strong>Default</strong></p></td>
</tr>
<tr class="row-even"><td><p>V4L2_CID_MPEG_VIDEO_GOP_SIZE</p></td>
<td><p>1</p></td>
<td><p>7200</p></td>
<td><p>1</p></td>
<td><p>1800</p></td>
</tr>
<tr class="row-odd"><td><p>V4L2_CID_MPEG_VIDEO_BITRATE</p></td>
<td><p>50000</p></td>
<td><p>100000000</p></td>
<td><p>1</p></td>
<td><p>500000</p></td>
</tr>
<tr class="row-even"><td><p>V4L2_CID_MPEG_VIDEO_H264_I_PERIOD</p></td>
<td><p>1</p></td>
<td><p>600</p></td>
<td><p>1</p></td>
<td><p>3600</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The controls should be set before calling VIDIOC_S_FMT.</p>
</div>
<p>The following table gives recommended values for bitrate based on resolution and frame type:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 43%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Resolution</strong></p></td>
<td><p><strong>Bitrate for I-frame Only sequence</strong></p></td>
<td><p><strong>Bitrate for IPP sequence</strong></p></td>
</tr>
<tr class="row-even"><td><p>QCIF (176x144)</p></td>
<td><p>1000000</p></td>
<td><p>500000</p></td>
</tr>
<tr class="row-odd"><td><p>CIF (352x288)</p></td>
<td><p>2000000</p></td>
<td><p>1000000</p></td>
</tr>
<tr class="row-even"><td><p>VGA (640x480)</p></td>
<td><p>6000000</p></td>
<td><p>4000000</p></td>
</tr>
<tr class="row-odd"><td><p>HD (1280x720)</p></td>
<td><p>12000000</p></td>
<td><p>7000000</p></td>
</tr>
<tr class="row-even"><td><p>Full HD (1920x1080)</p></td>
<td><p>15000000</p></td>
<td><p>10000000</p></td>
</tr>
</tbody>
</table>
<p>The encoder driver is using standard v4l2 mechanisms for configuring the various parameters
for profile, level, bitrate, tools, gop structure, etc. This means the user can use ‘v4l2-ctl -L’
to list all the available controls.  Then from gstreamer, use the extra-controls=s,&lt;ctrl_name&gt;=&lt;value&gt;
syntax to actually set them as part of the v4l2h264enc parameters.</p>
<p>However, it is important to note that while profile and level can be set using
this method, GStreamer 1.20.5 always sets profile and level to baseline/level_1.</p>
<p>To overcome this, don’t set profile/level with extra-controls, use the caps
of the video stream to set profile and level like this between the encoder and the next element.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>! &#39;video/x-h264,profile=(string)main,level=(string)4.0&#39;  !
</pre></div>
</div>
<p>Please see section <a class="reference internal" href="#running-a-gstreamer-pipeline">Running a GStreamer pipeline</a> for example pipelines that properly
set the additional controls in Gstreamer.</p>
</div>
</div>
<div class="section" id="gstreamer-plugins-for-multimedia">
<h3><span class="section-number">3.7.4.3. </span>GStreamer Plugins for Multimedia<a class="headerlink" href="#gstreamer-plugins-for-multimedia" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="open-source-gstreamer-overview">Open Source GStreamer Overview</p>
<p>GStreamer is an open source framework that simplifies the development of
multimedia applications, such as media players and capture encoders. It
encapsulates existing multimedia software components, such as codecs,
filters, and platform-specific I/O operations, by using a standard
interface and providing a uniform framework across applications.</p>
<p>The modular nature of GStreamer facilitates the addition of new
functionality, transparent inclusion of component advancements and
allows for flexibility in application development and testing.
Processing nodes are implemented via GStreamer plugins with several sink
and/or source pads. Many plugins are running as ARM software
implementations, but for more complex SoCs, certain functions are better
executed on hardware-accelerated IPs like D5520MP2 (DECODER) and
VXE384MP2 (ENCODER).</p>
<p>GStreamer is a multimedia framework based on data flow paradigm. It allows
easy plugin registration just by deploying new shared objects to the
/usr/lib/gstreamer-1.0 folder. The shared libraries in this folder are
scanned for reserved data structures identifying capabilities of
individual plugins. Individual processing nodes can be interconnected as
a pipeline at run-time, creating complex topologies. Node interfacing
compatibility is verified before the pipeline is started.</p>
<p>GStreamer brings a lot of value-added features to Processor SDK Linux J721e,
including audio encoding/decoding, audio/video synchronization, and
interaction with a wide variety of open source plugins (muxers,
demuxers, codecs, and filters). New GStreamer features are continuously
being added, and the core libraries are actively supported by
participants in the GStreamer community. Additional information about
the GStreamer framework is available on the GStreamer project site:
<a class="reference external" href="http://gstreamer.freedesktop.org/">http://gstreamer.freedesktop.org/</a>.</p>
<p class="rubric" id="video-decode-gstreamer-plugins">Hardware-Accelerated GStreamer Plugins</p>
<p>One benefit of using GStreamer as a multimedia framework is that the
core libraries already build and run on ARM Linux. Only a GStreamer
plugin is required to enable additional hardware features on TI’s
embedded processors with both ARM and hardware accelerators for
multimedia. The open source GStreamer plugins provide elements for
GStreamer pipelines that enable the use of hardware-accelerated video
decoding through the V4L2 GStreamer plugin.</p>
<p>Below is a list of GStreamer plugins that utilize the hardware-accelerated
video decoding in the J721E.</p>
<ul>
<li><p>DECODER</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>v4l2h264dec</p></li>
<li><p>v4l2h265dec</p></li>
<li><p>v4l2jpegdec</p></li>
</ol>
</div></blockquote>
</li>
<li><p>ENCODER</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>v4l2h264enc</p></li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="gstreamer-pipelines">
<h2><span class="section-number">3.7.5. </span>GStreamer Pipelines<a class="headerlink" href="#gstreamer-pipelines" title="Permalink to this headline">¶</a></h2>
<p class="rubric" id="visual-representation-of-typical-gstreamer-pipelines">Visual Representation of Typical GStreamer Pipelines</p>
<p>A typical GStreamer pipeline starts with one or more source elements,
uses zero or more filter elements, and ends in a sink or multiple sinks.</p>
<p>This section provides visual representation of one typical GStreamer
pipeline: multimedia decoding and playout.</p>
<p class="rubric" id="decode-pipeline">Decode Pipeline</p>
<p>The example pipeline shown in the figure <a class="reference internal" href="#gst-dec-playout-fig"><span class="std std-ref">GStreamer Decode Playout</span></a>
demonstrates the demuxing and playback of a transport stream. The input
is first read using the source element, and then processed by
GStreamer playbin2 (Player Bin 2). To use playbin2 in the pipeline,
we use the playbin element (as shown in the figure below). Inside playbin2,
demuxer first demuxes the stream into its audio and video stream components.</p>
<p>The video stream is then queued and sent to V4L2
GStreamer plugin for decoding. Finally, it is sent to a video sink to
display the decoded video on the screen. The audio stream is queued and
then decoded by the ARM audio GStreamer plugin, and then reaches its
destination at the alsasink element to play the decoded audio.</p>
<div class="center"><div class="floatnone"><div class="figure align-default" id="id2">
<span id="gst-dec-playout-fig"></span><img alt="gstreamer decode playout" src="../_images/Gst_decode_playout_v2.png" />
<p class="caption"><span class="caption-number">Fig. 3.6 </span><span class="caption-text">GStreamer Decode Playout</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div></div><div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="running-a-gstreamer-pipeline">
<h3><span class="section-number">3.7.5.1. </span>Running a GStreamer pipeline<a class="headerlink" href="#running-a-gstreamer-pipeline" title="Permalink to this headline">¶</a></h3>
<p>GStreamer pipelines can also run from the command line. In order to do so,
exit Weston by pressing Ctrl-Alt-Backspace from the keyboard which
connects to the EVM. Then, if the LCD screen stays in “Please wait…”,
press Ctrl-Alt-F1 to go to the command line on the LCD console. After that,
the command line can be used from serial console, SSH console, or LCD
console.</p>
<p>One can run an audio video file using the GStreamer playbin from the
console. Currently, the supported Audio/video sink is kmssink,
waylandsink and alsassink.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>playbin is currently supported only with kmssink and only for NV12 output.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kmssink:
  target #  gst-launch-1.0 playbin uri=file:///&lt;path_to_file&gt; video-sink=kmssink audio-sink=alsasink
</pre></div>
</div>
<p>One can also run an audio video file without playbin. This is required
for decode to any sink except kmssink due to the need to use the video
format filter, which can not be used with playbin. The following pipelines
show how to playback to kmssink and waylandsink without playbin.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kmssink (video only playback):
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux ! h264parse ! v4l2h264dec ! video/x-raw,format=NV12 ! kmssink
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kmssink (audio + video playback):
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux name=demux \
            demux.video_0 ! queue ! h264parse ! v4l2h264dec ! video/x-raw,format=NV12 ! kmssink \
            demux.audio_0 ! queue ! decodebin ! alsasink
</pre></div>
</div>
<p>The following pipelines show playback to waylandsink. Please refer
<a class="reference external" href="Foundational_Components_Graphics.html#wayland-weston">Wayland/Weston</a>
to start Weston before running the pipelines.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>waylandsink (video only playback):
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux ! h264parse ! v4l2h264dec ! video/x-raw,format=NV12 ! waylandsink
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>waylandsink (audio + video playback):
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux name=demux \
            demux.video_0 ! queue ! h264parse ! v4l2h264dec ! video/x-raw,format=NV12 ! waylandsink \
            demux.audio_0 ! queue ! decodebin ! alsasink
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic">
<li><p>The V4L2 Plugin (and TI V4L2 Video Decode driver) will not select the
native color format on its own. The video format filter MUST be used to
ensure proper decoding. The required filter is highlighted in the below
example pipeline. The format can be changed according to the input stream:</p>
<blockquote>
<div><p>gst-launch-1.0 ! filesrc location=/&lt;path_to_file&gt; ! qtdemux ! h264parse ! v4l2h264dec ! <strong>video/x-raw,format=NV12</strong> ! waylandsink</p>
</div></blockquote>
</li>
<li><p>If the native format is not supported by the sink, then a color converter
plugin will need to be used in the pipeline.</p></li>
<li><p>playbin is currently supported ONLY with kmssink and ONLY for NV12 format.</p></li>
</ol>
<p>For full list of limitations, see <a class="reference internal" href="#limitations-of-gstreamer-plugins">Limitations of GStreamer Plugins</a>.</p>
</div>
<p>The following pipelines show examples of using the v4l2h265dec and v4l2jpegdec elements.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HEVC/H.265 video playback to waylandsink
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux ! h265parse ! v4l2h265dec ! video/x-raw,format=NV12 ! waylandsink
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>MJPEG video playback to waylandsink
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux ! jpegparse ! v4l2jpegdec ! video/x-raw,format=I420 ! videoconvert ! video/x-raw,format=NV12 ! waylandsink
</pre></div>
</div>
<p>Scaling of the decoded video to fit the display with kmssink can be achieved by
selecting a kms plane with scaling support.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>To enumerate all the connector IDs and plane IDs, modetest can be used:
  target #  modetest -M tidss -p

kmssink playback using VID plane that supports display scaling:
  target #  gst-launch-1.0 playbin uri=file:///&lt;path_to_file&gt; video-sink=&quot;kmssink plane-id=41&quot; audio-sink=alsasink

Or
  target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; ! qtdemux ! h264parse ! v4l2h264dec ! video/x-raw,format=NV12 ! kmssink plane-id=41
</pre></div>
</div>
<p>The following pipeline shows example of using the v4l2h264enc element.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>H.264 video encoding to filesink
   target #  gst-launch-1.0 filesrc location=/&lt;path_to_file&gt; rawvideoparse width=1280 height=720 framerate=30/1 format=23 ! v4l2h264enc ! filesink location=/&lt;path_to_file&gt;
</pre></div>
</div>
<p>As previously mentioned in <a class="reference internal" href="#linux-kernel-drivers">Linux Kernel Drivers</a>, the encoder can be configured with additional controls. The following
pipelines provided some insight on how these configurations can be done.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Main Profile, level 4, and CABAC disabled
   target # gst-launch-1.0 videotestsrc num_buffers=1000 ! capssetter caps=&quot;video/x-raw,width=1920,height=1072,framerate=25/1,format=NV12&quot; ! \
            v4l2h264enc extra-controls=&quot;s,video_bitrate=1000000,h264_8x8_transform_enable=false,\
            h264_entropy_mode=false,max_number_of_reference_pics=1&quot; ! \
            &#39;video/x-h264,profile=(string)main,level=(string)4&#39; ! filesink location=test.264
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>High profile, level 5.1, with CABAC and 8x8 transform enabled
   target # gst-launch-1.0 videotestsrc num_buffers=1000 ! capssetter caps=&quot;video/x-raw,width=1920,height=1072,framerate=25/1,format=NV12&quot; ! \
            v4l2h264enc extra-controls=&quot;s,video_bitrate=1000000,h264_8x8_transform_enable=true,\
            h264_entropy_mode=true,max_number_of_reference_pics=1&quot; ! &#39;video/x-h264,profile=(string)main,level=(string)5.1&#39; ! filesink location=test.264
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Constrained baseline, level 2.1
   target # gst-launch-1.0 videotestsrc num_buffers=1000 ! capssetter caps=&quot;video/x-raw,width=320,height=240,framerate=20/1,format=NV12&quot; ! \
            v4l2h264enc extra-controls=&quot;s,video_bitrate=64000,h264_8x8_transform_enable=false, h264_entropy_mode=0,max_number_of_reference_pics=1&quot; ! \
            &#39;video/x-h264,profile=(string)baseline,level=(string)2.1&#39; ! filesink location=test.264
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an incorrect combination of tools is used, or a bitrate/num_ref_frames
more than the requested level can support, then the driver WILL override
the configuration that was scpecified. By specifying these settings, the user is
hinting to the driver what is desired, but the driver inevitably makes the final
decision.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="limitations-of-gstreamer-plugins">
<h3><span class="section-number">3.7.5.2. </span>Limitations of GStreamer Plugins<a class="headerlink" href="#limitations-of-gstreamer-plugins" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="gstreamer-plugins-limitations">Limitations of GStreamer Plugins</p>
<ul class="simple">
<li><p>GStreamer V4L2 plugin decoder elements need video filter
(video/x-raw,format=&lt;format&gt;) to select the native color format for decoding.</p></li>
<li><p>playbin is supported ONLY with kmssink and ONLY with NV12 format due to need
for video filter with other sinks.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="gstreamer-plugin-internals">
<h3><span class="section-number">3.7.5.3. </span>GStreamer Plugin Internals<a class="headerlink" href="#gstreamer-plugin-internals" title="Permalink to this headline">¶</a></h3>
<p class="rubric" id="v4l2-gstreamer-plugin-support">V4L2 GStreamer Plugin Support</p>
<p>Each V4L2 decode element has one sink pad and one src pad. The sink pad
is for receiving the encoded bitstream, and the src pad is for outputting the
raw video data.</p>
<p class="rubric" id="element-src-and-sink-pads">Element Src and Sink Pads</p>
<p>The following table gives the format support for the sink and src pads for each
supported element.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Element</strong></p></td>
<td><p><strong>Sink Pad Format</strong></p></td>
<td><p><strong>Src Pad Format</strong></p></td>
</tr>
<tr class="row-even"><td><p>v4l2h264dec</p></td>
<td><p>H.264</p></td>
<td><p>NV12</p>
<p>NV16</p>
</td>
</tr>
<tr class="row-odd"><td><p>v4l2h265dec</p></td>
<td><p>HEVC/H.265</p></td>
<td><p>NV12</p>
<p>NV16</p>
</td>
</tr>
<tr class="row-even"><td><p>v4l2jpegdec</p></td>
<td><p>MJPEG</p></td>
<td><p>I420</p>
<p>Y42B</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic">
<li><p>No color conversion is performed in the plugin or V4L2 drivers. The
color format selected should be that of the native color format of the encoded bitstream.</p></li>
<li><p>To select the appropriate color format, it is important to provide the color
format filter to the GStreamer pipeline. See <a class="reference internal" href="#running-a-gstreamer-pipeline">Running a GStreamer pipeline</a> for more
information on how to provide this filter. Example:</p>
<blockquote>
<div><p>gst-launch-1.0 filesrc location=&lt;file_location&gt; ! h264parse ! v4l2h264dec ! <strong>video/x-raw,format=NV12</strong> ! kmssink</p>
</div></blockquote>
</li>
<li><p>The v4l2 decode driver supports some
<a class="reference external" href="Foundational_Components_Multimedia_D5520_VXE384.html#v4l2-dec-color-format-support">custom 10-bit color formats</a>,
but that support is not available at GStreamer plugin side.</p></li>
</ol>
<p>For full list of limitations, see <a class="reference internal" href="#limitations-of-gstreamer-plugins">Limitations of GStreamer Plugins</a>.</p>
</div>
<p class="rubric" id="inspecting-an-element">Inspecting an Element</p>
<p>To get the full information about an element, the gst-inspect-1.0 utility can be used on
the target. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>target #  gst-inspect-1.0 v4l2h264dec
target #  gst-inspect-1.0 v4l2h264enc
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>gst-inspect-1.0 will show that all color formats are available for every element.
However, not all color formats are supported by every element. The table
<a class="reference external" href="Foundational_Components_Multimedia_D5520_VXE384.html#element-src-and-sink-pads">here</a>
summarizes the actual support per element.</p>
</div>
<p class="rubric" id="buffer-flow-considerations">Buffer Flow Considerations</p>
<p>The V4L2 GStreamer Plugin provides the ability to either allocate its own buffers,
or import buffers from a downstream plugin such as kmssink or waylandsink. This
buffer io-mode can be selected using the property “capture-io-mode”. To request
the decoder element (and in turn the TI V4L2 decoder driver) to do the allocation,
“dmabuf” (GST_V4L2_IO_DMABUF) is used. To request the element to import buffers
allocated downstream, “dmabuf-import” (GST_V4L2_IO_DMABUF_IMPORT) is used. By
default for the decode elements, GST_V4L2_IO_DMABUF will be selected due to V4L2
decoder driver support for it. An example of using dmabuf-import in a gstreamer
pipeline:</p>
<p>With the TI V4L2 Video Decoder Driver, the best latency performance to display is achieved
with “dmabuf-import” (GST_V4L2_IO_DMABUF_IMPORT). This feature provides
the best performance because internally the V4L2 element will no longer
have to copy buffer information the element’s region, to the display region.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="memory-optimisation">
<h2><span class="section-number">3.7.6. </span>Memory Optimisation<a class="headerlink" href="#memory-optimisation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="decoder-driver-memory-optimisation">
<h3><span class="section-number">3.7.6.1. </span>Decoder Driver Memory Optimisation<a class="headerlink" href="#decoder-driver-memory-optimisation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>To optimise the Decoder driver memory allocation with performance degradation less than 10%.
Change the Macro in Makefile as CAPTURE_CONTIG_ALLOC ?=n, and follow the driver rebuild instructions.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>drivers/media/platform/vxe-vxd/makefile
</pre></div>
</div>
<p>Make the following change:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-                 CAPTURE_CONTIG_ALLOC ?=y
+                 CAPTURE_CONTIG_ALLOC ?=n
</pre></div>
</div>
<p>By changing this macro, the memory allocation is switching from using CMA (contiguous memory allocation)
to taking advantage of the MMU that is packaged on the DECODER.</p>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="rebuilding-and-debugging">
<h2><span class="section-number">3.7.7. </span>Rebuilding and Debugging<a class="headerlink" href="#rebuilding-and-debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rebuilding-v4l2-drivers">
<h3><span class="section-number">3.7.7.1. </span>Rebuilding V4L2 Drivers<a class="headerlink" href="#rebuilding-v4l2-drivers" title="Permalink to this headline">¶</a></h3>
<p>If any modification are made to the drivers, they will need to be rebuilt
and updated on the device. These drivers are rebuilt by following the standard
process for <a class="reference external" href="Foundational_Components_Kernel_Users_Guide.html">Building TI’s Linux Kernel</a>.
Please refer to this page for a more detailed guide in rebuilding modules.</p>
<p>Once built, install the rebuilt module(s) on target filesystem. Copy the new kernel
modules to their proper location on board. These locations for decoder and encoder,
respectively, can be seen below.</p>
<blockquote>
<div><ul class="simple">
<li><p>/lib/modules/&lt;version&gt;/kernel/drivers/media/platform/vxe-vxd/vxd-dec.ko</p></li>
<li><p>/lib/modules/&lt;version&gt;/kernel/drivers/media/platform/vxe-vxd/vxe-enc.ko</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="debug-logs">
<h3><span class="section-number">3.7.7.2. </span>Debug Logs<a class="headerlink" href="#debug-logs" title="Permalink to this headline">¶</a></h3>
<p>In case additional logs are needed from the V4L2 Encode or Decode
drivers, debug tracing can be enabled by rebuilding the module
with the appropriate options selected.</p>
<p class="rubric" id="v4l2-dec-debug-options">V4L2 Decoder Debug Options</p>
<p>DEBUG_DECODER_DRIVER can be set to ‘y’ to enable all the debug tracing
in the decoder driver. This should only be used for debugging
purposes. To enable it, set DEBUG_DECODER_DRIVER to ‘y’ and rebuild
the decoder module following the instructions in <a class="reference internal" href="#rebuilding-v4l2-drivers">Rebuilding V4L2 Drivers</a>.</p>
<p class="rubric" id="v4l2-enc-debug-options">V4L2 Encoder Debug Options</p>
<p>DEBUG_ENCODER_DRIVER can be set to ‘y’ to enable all the debug tracing
in the encoder driver. This should only be used for debugging
purposes. To enable it, set DEBUG_ENCODER_DRIVER to ‘y’ and rebuild
the encoder module following the instructions in <a class="reference internal" href="#rebuilding-v4l2-drivers">Rebuilding V4L2 Drivers</a>.</p>
</div>
<div class="section" id="latency-profiling">
<h3><span class="section-number">3.7.7.3. </span>Latency Profiling<a class="headerlink" href="#latency-profiling" title="Permalink to this headline">¶</a></h3>
<p>The decode latency of the V4L2 Decoder can be measured at the picture or
firmware level. Only one can be enabled at a time.</p>
<p class="rubric" id="decoder-firmware-latency-profiling">Decoder Firmware Latency Profiling</p>
<p>To enable firmware latency profiling, follow these steps:</p>
<ol class="arabic">
<li><p>Enable the print in the driver code by modifying the following file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>drivers/media/platform/img/vxe-vxd/decoder/vxd_pvdec.c
</pre></div>
</div>
<p>Make the following change:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-                 dev_info(dev,
+                 dev_err(dev,
                           &quot;fw decode time is %llu us for msg_id x%0x\n&quot;,
</pre></div>
</div>
</li>
<li><p>Follow the instructions in the section <a class="reference internal" href="#rebuilding-v4l2-drivers">Rebuilding V4L2 Drivers</a> in
order to rebuild the module and copy the updated module to the target.
The module to copy is vxd-dec.ko.</p></li>
<li><p>Collect the logs and look for the traces that look like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[  802.626314] img_dec 4300000.video-decoder: fw decode time is 5314 us for msg_id xc60f
</pre></div>
</div>
</li>
<li><p>Each trace gives the firmware decode time per frame. All numbers are in
micro seconds.</p></li>
</ol>
<p class="rubric" id="decoder-v4l2-picture-dec-latency-profiling">Decoder V4L2-level Picture Decode Latency Profiling</p>
<p>To enable V4L2-level picture decode latency profiling, follow these steps:</p>
<ol class="arabic">
<li><p>Enable the print in the driver code by modifying the following file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>drivers/media/platform/img/vxe-vxd/decoder/vxd_v4l2.c
</pre></div>
</div>
<p>Make the following change:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-                 dev_info(dev,
+                 dev_err(dev,
                          &quot;picture buf decode time is %llu us for buf_map_id 0x%x\n&quot;,
</pre></div>
</div>
</li>
<li><p>Follow the instructions in the section <a class="reference internal" href="#rebuilding-v4l2-drivers">Rebuilding V4L2 Drivers</a> in
order to rebuild the module and copy the updated module to the target.
The module to copy is vxd-dec.ko.</p></li>
<li><p>Collect the logs and look for the traces that look like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[  511.316237] img_dec 4300000.video-decoder: picture buf decode time is 9901 us for buf_map_id 0x4000025
</pre></div>
</div>
</li>
<li><p>Each trace gives the v4l2-level picture decode time per frame. All numbers are in
micro seconds.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>Known limitations:</dt><dd><ol class="arabic simple">
<li><p>DMA Buf import on encoder works only for 16 byte width and height aligned buffers from the upstream element.
For Non 16 byte aligned resolution, the pipeline exits safely with buffer size negotiation error.</p></li>
</ol>
</dd>
</dl>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Foundational_Components_Virtualization.html" class="btn btn-neutral float-right" title="3.8. Virtualization" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Foundational_Components/Graphics/Rogue_Power_Management_Info.html" class="btn btn-neutral" title="3.6.8. Rogue Power Management Info" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2023</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'09_00_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });

        $('body').on("mousewheel", function () {
            // Remove default behavior
            event.preventDefault();
            // Scroll without smoothing
            var wheelDelta = event.wheelDelta;
            var currentScrollPosition = window.pageYOffset;
            window.scrollTo(0, currentScrollPosition - wheelDelta);
        });
      });
  </script>
   

</body>
</html>